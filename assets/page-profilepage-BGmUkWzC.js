import{r as a,j as e}from"./vendor-react-Cz7lOhWp.js";import{a as j,c as b,d as v}from"./components-common-D1FIPmLn.js";import"./vendor-misc-DLWoUI1x.js";import"./vendor-animation-DgmMmKbp.js";import"./utils-core-CedM2sFj.js";import"./utils-system-CYtPJOeg.js";import"./components-ui-DZCMc5qQ.js";import"./components-heavy-B9YxSDK_.js";const A=()=>{const{user:k,logout:p}=j(),[t,m]=a.useState(null),[h,f]=a.useState(!0),[x,r]=a.useState(!1),[l,n]=a.useState({firstName:"",lastName:"",phone:""}),[u,g]=a.useState(!1),[i,o]=a.useState({type:"",content:""});a.useEffect(()=>{N()},[]);const N=async()=>{try{const s=await b.getUserProfile();s.success&&(m(s.data),n({firstName:s.data.firstName||"",lastName:s.data.lastName||"",phone:s.data.phone||""}))}catch{o({type:"error",content:"Failed to load profile"})}finally{f(!1)}},c=s=>{n({...l,[s.target.name]:s.target.value})},y=async s=>{s.preventDefault(),g(!0);try{const d=await b.updateProfile(l);d.success&&(m(d.data),r(!1),o({type:"success",content:"Profile updated successfully"}))}catch{o({type:"error",content:error.message})}finally{g(!1)}};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx(v,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Profile"}),!x&&e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Profile"})]}),i.content&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${i.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:i.content}),x?e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t?.email||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>{r(!1),n({firstName:t?.firstName||"",lastName:t?.lastName||"",phone:t?.phone||""})},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"First Name"}),e.jsx("p",{className:"text-lg text-gray-900",children:t?.firstName||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Last Name"}),e.jsx("p",{className:"text-lg text-gray-900",children:t?.lastName||"Not set"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-lg text-gray-900",children:t?.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),e.jsx("p",{className:"text-lg text-gray-900",children:t?.phone||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Role"}),e.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:t?.role||"user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Member Since"}),e.jsx("p",{className:"text-lg text-gray-900",children:t?.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:p,className:"text-red-600 hover:text-red-800 font-medium",children:"Sign Out"})})]})})})})})};export{A as default};
