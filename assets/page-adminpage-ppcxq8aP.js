import{r as t,j as e}from"./vendor-react-DKSiDIWS.js";import{a as N,c as r,d as b}from"./components-common-B_-fNfOl.js";import"./vendor-misc-DLWoUI1x.js";import"./vendor-animation-Bk3MpbEf.js";import"./utils-core-Dh4FrfGx.js";import"./utils-system-DYl7h-0K.js";import"./components-ui-DhOcqZA6.js";import"./components-heavy-BLieJuhX.js";const _=()=>{const{user:p}=N(),[a,o]=t.useState("users"),[d,m]=t.useState([]),[i,h]=t.useState([]),[x,u]=t.useState([]),[y,c]=t.useState(!0),[f,w]=t.useState({});t.useEffect(()=>{n()},[a]);const n=async()=>{c(!0);try{switch(a){case"users":{const s=await r.getAllUsers();s.success&&m(s.data);break}case"business":{const s=await r.getAllBusinessRegistrations();s.success&&h(s.data);break}case"support":{const s=await r.getAllSupportTickets();s.success&&u(s.data);break}}}catch{}finally{c(!1)}},g=async(s,l)=>{try{(await r.updateBusinessStatus(s,l)).success&&n()}catch{}};return e.jsx(b,{requiredRole:"admin",children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",p?.firstName]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:d.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Registrations"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Support Tickets"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:x.length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"users",label:"Users",icon:"👥"},{id:"business",label:"Business Registrations",icon:"🏢"},{id:"support",label:"Support Tickets",icon:"🎫"}].map(s=>e.jsxs("button",{onClick:()=>o(s.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${a===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.label]},s.id))})}),e.jsx("div",{className:"p-6",children:y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[a==="users"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Joined"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"font-medium text-gray-900",children:[s.firstName," ",s.lastName]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]},s.id))})]})}),a==="business"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Business Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:s.business_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:s.business_type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("select",{value:s.status,onChange:l=>g(s.id,l.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},s.id))})]})}),a==="support"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:s.subject}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:s.email||"Anonymous"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.priority==="high"||s.priority==="urgent"?"bg-red-100 text-red-800":s.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="resolved"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})]})})]})]})})})};export{_ as default};
